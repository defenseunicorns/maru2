# only really caring that these commands don't fail
exec maru2 completion bash
exec maru2 completion zsh
exec maru2 completion fish
exec maru2 completion powershell
exec maru2 completion tcsh
stdout 'Use "maru2 completion \[command\] --help"'

exec maru2 __complete status
cmp stdout stdout.txt
cmp stderr good-stderr.txt

exec maru2 __complete --fetch-policy status
cmp stdout stdout-fetch-policy.txt
cmp stderr good-stderr.txt

exec maru2 __complete --log-level status
cmp stdout stdout-log-level.txt
cmp stderr good-stderr.txt

-- stdout.txt --
default
bar
foo
other:default
other:bar
other:foo
:4
-- good-stderr.txt --
Completion ended with directive: ShellCompDirectiveNoFileComp
-- tasks.yaml --
schema-version: v1
aliases:
  other:
    path: tasks/other.yaml
tasks:
  default:
    steps:
      - run: echo "default"
  foo:
    steps:
      - run: echo "foo"
  bar:
    steps:
      - run: echo "bar"
-- tasks/other.yaml --
schema-version: v0
tasks:
  default:
    - run: echo "default"
  foo:
    - run: echo "foo"
  bar:
    - run: echo "bar"
-- stdout-fetch-policy.txt --
always
if-not-present
never
:4
-- stdout-log-level.txt --
debug
info
warn
error
fatal
:4
