# yaml-language-server: $schema=../maru2.schema.json

inputs:
  message:
    required: false
    description: message to echo

tasks:
  echo:
    - run: |
        echo "$INPUT_MESSAGE"

  hello-world:
    - uses: file:hello-world.yaml

  pwd:
    - run: pwd

  chuck:
    - uses: builtin:fetch
      with:
        url: https://api.chucknorris.io/jokes/random
        timeout: 10s
        headers:
          Accept: application/json

  fails:
    - run: exit 2

  continues:
    - run: echo 1
    - uses: fails
    - run: echo 3
    - if: always()
      run: echo 3

  sleep:
    - run: sleep 10
    - run: echo "there"
      if: always()
    - run: echo "hello"
      if: cancelled()
    - run: echo obi
      if: failure()
