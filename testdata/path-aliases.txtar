# alias resolution functionality
exec maru2 -f workflow-with-aliases.yaml --list
stderr 'local-task'
stderr 'remote-task'
stderr 'local:echo-local'

# local alias resolution
exec maru2 -f workflow-with-aliases.yaml local-task
stdout 'Local alias resolved successfully'

# direct alias call
exec maru2 -f workflow-with-aliases.yaml local:echo-local

# invalid alias reference
! exec maru2 -f workflow-invalid-alias.yaml broken-task
stderr 'no such file or directory'

-- workflow-with-aliases.yaml --
schema-version: v1
aliases:
  local:
    path: local-tasks.yaml
tasks:
  local-task:
    steps:
      - uses: local:echo-local
  remote-task:
    inputs:
      message:
        description: Message for remote task
        default: hello from remote
    steps:
      - run: echo "${{ input \"message\" }}"

-- local-tasks.yaml --
schema-version: v1
tasks:
  echo-local:
    steps:
      - run: echo "Local alias resolved successfully"

-- workflow-invalid-alias.yaml --
schema-version: v1
aliases:
  broken:
    path: nonexistent.yaml
tasks:
  broken-task:
    steps:
      - uses: broken:some-task
